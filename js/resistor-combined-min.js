var twitterFetcher=function(){function b(a){return a.replace(/<b[^>]*>(.*?)<\/b>/gi,function(a,c){return c}).replace(/class=".*?"|data-query-source=".*?"|dir=".*?"|rel=".*?"/gi,"")}function a(a,c){for(var b=[],d=RegExp("(^| )"+c+"( |$)"),e=a.getElementsByTagName("*"),k=0,g=e.length;k<g;k++)d.test(e[k].className)&&b.push(e[k]);return b}var c="",d=20,q=!0,p=[],w=!1,r=!0,s=!0,u=null,t=!0,z=!0,x=null,A=!0;return{fetch:function(a,b,m,l,e,k,g,f,t,v){void 0===m&&(m=20);void 0===l&&(q=!0);void 0===e&&(e=
!0);void 0===k&&(k=!0);void 0===g&&(g="default");void 0===f&&(f=!0);void 0===t&&(t=null);void 0===v&&(v=!0);w?p.push({id:a,domId:b,maxTweets:m,enableLinks:l,showUser:e,showTime:k,dateFunction:g,showRt:f,customCallback:t,showInteraction:v}):(w=!0,c=b,d=m,q=l,s=e,r=k,z=f,u=g,x=t,A=v,b=document.createElement("script"),b.type="text/javascript",b.src="//cdn.syndication.twimg.com/widgets/timelines/"+a+"?&lang=en&callback=twitterFetcher.callback&suppress_response_codes=true&rnd="+Math.random(),document.getElementsByTagName("head")[0].appendChild(b))},
callback:function(n){var h=document.createElement("div");h.innerHTML=n.body;"undefined"===typeof h.getElementsByClassName&&(t=!1);n=[];var m=[],l=[],e=[],k=[],g=0;if(t)for(h=h.getElementsByClassName("tweet");g<h.length;){0<h[g].getElementsByClassName("retweet-credit").length?e.push(!0):e.push(!1);if(!e[g]||e[g]&&z)n.push(h[g].getElementsByClassName("e-entry-title")[0]),k.push(h[g].getAttribute("data-tweet-id")),m.push(h[g].getElementsByClassName("p-author")[0]),l.push(h[g].getElementsByClassName("dt-updated")[0]);
g++}else for(h=a(h,"tweet");g<h.length;)n.push(a(h[g],"e-entry-title")[0]),k.push(h[g].getAttribute("data-tweet-id")),m.push(a(h[g],"p-author")[0]),l.push(a(h[g],"dt-updated")[0]),0<a(h[g],"retweet-credit").length?e.push(!0):e.push(!1),g++;n.length>d&&(n.splice(d,n.length-d),m.splice(d,m.length-d),l.splice(d,l.length-d),e.splice(d,e.length-d));h=[];g=n.length;for(e=0;e<g;){if("string"!==typeof u){var f=new Date(l[e].getAttribute("datetime").replace(/-/g,"/").replace("T"," ").split("+")[0]),f=u(f);
l[e].setAttribute("aria-label",f);if(n[e].innerText)if(t)l[e].innerText=f;else{var y=document.createElement("p"),v=document.createTextNode(f);y.appendChild(v);y.setAttribute("aria-label",f);l[e]=y}else l[e].textContent=f}f="";q?(s&&(f+='<div class="user">'+b(m[e].innerHTML)+"</div>"),f+='<p class="tweet">'+b(n[e].innerHTML)+"</p>",r&&(f+='<p class="timePosted">'+l[e].getAttribute("aria-label")+"</p>")):n[e].innerText?(s&&(f+='<p class="user">'+m[e].innerText+"</p>"),f+='<p class="tweet">'+n[e].innerText+
"</p>",r&&(f+='<p class="timePosted">'+l[e].innerText+"</p>")):(s&&(f+='<p class="user">'+m[e].textContent+"</p>"),f+='<p class="tweet">'+n[e].textContent+"</p>",r&&(f+='<p class="timePosted">'+l[e].textContent+"</p>"));A&&(f+='<p class="interact"><a href="https://twitter.com/intent/tweet?in_reply_to='+k[e]+'" class="twitter_reply_icon">Reply</a><a href="https://twitter.com/intent/retweet?tweet_id='+k[e]+'" class="twitter_retweet_icon">Retweet</a><a href="https://twitter.com/intent/favorite?tweet_id='+
k[e]+'" class="twitter_fav_icon">Favorite</a></p>');h.push(f);e++}if(null==x){n=h.length;m=0;l=document.getElementById(c);for(k="<ul>";m<n;)k+="<li>"+h[m]+"</li>",m++;l.innerHTML=k+"</ul>"}else x(h);w=!1;0<p.length&&(twitterFetcher.fetch(p[0].id,p[0].domId,p[0].maxTweets,p[0].enableLinks,p[0].showUser,p[0].showTime,p[0].dateFunction,p[0].showRt,p[0].customCallback,p[0].showInteraction),p.splice(0,1))}}}();SC.initialize({client_id:"67f2822a454cafa2b800fc88cb5c0518",redirect_uri:"http://resistorsings.com"});
$(document).ready(function(){numTweets=20;window.scrollReveal=new scrollReveal;$("#RE").fadeTo(1E3,1,function(){$("#SIS").fadeTo(1E3,1,function(){$("#TOR").fadeTo(1E3,1,function(){})})});twitterFetcher.fetch("438885011689713665","tweet",numTweets,!0,!1,!0,void 0,!0,handleTweets);playSongs();getPhotos();showDates()});
function handleTweets(b){var a=0,c=0,d=0;splitTweet(b[a]);$(".prevTweet").click(function(d){d.preventDefault();c-=40;$("img.oscillator.prevTweet").css("transform","rotate("+c+"deg)");a=0===a?numTweets-1:a-1;$("#text").fadeOut(500,function(){splitTweet(b[a]);$("#text").fadeIn(500)})});$(".nextTweet").click(function(c){c.preventDefault();d+=40;$("img.oscillator.nextTweet").css("transform","rotate("+d+"deg)");a=(a+1)%numTweets;$("#text").fadeOut(500,function(){splitTweet(b[a]);$("#text").fadeIn(500)})})}
function splitTweet(b){var a=b.length-1,c=b.search('<p class="interact">'),d=b.slice(0,c);b=b.slice(c,a);$("#text").html(d);$("#buttons").html(b)}Track=function(b){var a="";SC.stream(b,function(c){a=c});this.play=function(){a.play({onfinish:function(){$(".nextSong").click()},whileplaying:function(){var a=this.position/this.duration*100;$("#progress").css("width",a+"%")}})};this.pause=function(){a.togglePause()};this.stop=function(){a.stop()}};
Rotation=function(b){var a=b[1];this.currentTrack=function(){return a};this.nextTrack=function(){var c=(b.indexOf(a)+1)%b.length;return a=b[c]};this.prevTrack=function(){var c=b.indexOf(a)-1;return a=b[c]}};function changeTitle(b,a){var c="<a href='"+b.permalink_url+"' onClick=ga('send', 'event', 'Soundcloud', 'Click', "+b.title+");>"+b.title+"</a>";a?$("#title").fadeOut(500,function(){$("#title").html(c).fadeIn(500)}):$("#title").html(c).fadeIn(500)}
function getPhotos(){$.get("https://api.instagram.com/v1/users/252833323/media/recent/?client_id=027d4ba8024541bda9174d50c1592dfa",function(b){addPhotos(b.data);rotatePhotos()},"jsonp")}
function playSongs(){SC.get("/users/11021442/tracks",function(b){var a=new Rotation(b),c=a.currentTrack(),d=new Track(c.uri),q=$("#soundcloud"),p=$("#soundcloud img.knob.nextSong"),w=$("#soundcloud img.knob.prevSong"),r=700>=$(window).width()?".small":".large",s=0,u=0;changeTitle(c);$(".play").on("click",function(a){a.preventDefault();q.hasClass("paused")?(q.removeClass("paused").addClass("playing"),d.pause()):(q.addClass("playing"),d.play(),ga("send","event","Soundcloud","Play",c.title));$(r+".pause").show();
$(r+".play").hide()});$(".pause").on("click",function(a){a.preventDefault();d.pause();q.addClass("paused").removeClass("playing");$(r+".pause").hide();$(r+".play").show()});$(".nextSong").on("click",function(b){b.preventDefault();d.stop();c=a.nextTrack();d=new Track(c.uri);changeTitle(c,!0);s+=40;p.css("transform","rotate("+s+"deg)");q.hasClass("playing")&&d.play();q.removeClass("paused")});$(".prevSong").on("click",function(b){b.preventDefault();d.stop();c=a.prevTrack();d=new Track(c.uri);changeTitle(c,
!0);u-=40;w.css("transform","rotate("+u+"deg)");q.hasClass("playing")&&d.play();q.removeClass("paused")})})}
function addPhotos(b){var a="",c="";$("#photoContainer").append('<a href="'+b[0].link+"\" onClick=\"ga('send', 'event',  'Instagram', &#39;"+b[0].link+'&#39;);"><img id="slide0" src="'+b[0].images.low_resolution.url+'"></a>');$("#slide0").addClass("active");for(var d=1;d<b.length;d++)a=b[d].images.low_resolution.url,c=b[d].link,$("#photoContainer").append('<a href="'+c+"\" onClick=\"ga('send', 'event', 'Instagram', &#39;"+c+'&#39;);>"><img id="slide'+d+'" src="'+a+'"></a>')}
function rotatePhotos(){$(".nextPhoto").click(function(b){b.preventDefault();var a=$("#photoContainer a img.active"),c=0<a.parent().next().length?a.parent().next().contents():$("#photoContainer a:first img");c.css("z-index",2);a.fadeOut(750,function(){a.css("z-index",1).show().removeClass("active");c.css("z-index",3).addClass("active")})});$(".prevPhoto").click(function(b){b.preventDefault();var a=$("#photoContainer a img.active"),c=0<a.parent().prev().length?a.parent().prev().contents():$("#photoContainer a:last img");
c.css("z-index",2);a.fadeOut(750,function(){a.css("z-index",1).show().removeClass("active");c.css("z-index",3).addClass("active")})})}
function showDates(){var b=0;$.getJSON("shows.json").success(function(a){typewriter("upcoming_shows","Upcoming Shows",150);typewriter("past_shows","Past Shows",150);for(var c=0;c<a.shows.length;c++)isUpcoming(a.shows[c])?(b++,a.shows[c].url?$("#upcoming_dates ul").append("<li>"+a.shows[c].date+' - <a href="http://'+a.shows[c].url+"\"onclick=\"ga('send', 'event', 'live', '"+a.shows[c].date+"');\">"+a.shows[c].venue+"</a> - "+a.shows[c].city+"</li>"):$("#upcoming_dates ul").append("<li>"+a.shows[c].date+
" - "+a.shows[c].venue+" - "+a.shows[c].city+"</li>")):$("#past_dates ul").append("<li>"+a.shows[c].date+" - "+a.shows[c].venue+" - "+a.shows[c].city+"</li>");0===b&&$("#upcoming_dates ul").append("<li>Shows TBD ... Check back soon ...</li>")}).fail(function(a,c,b){console.log("Request Failed: "+(c+", "+b))})}function isUpcoming(b){return Date.now()<new Date(b)?!0:!1}
function playerStyle(){$("#soundcloud").watch("opacity",function(){1==this.style("opacity")&&$(this).css({opacity:".85",transition:"opacity .6s","-webkit-transition":"opacity .6s"})})}function typewriter(b,a,c){var d=0,q=setInterval(function(){document.getElementById(b).innerHTML+=a[d];d++;d==a.length&&clearInterval(q)},c)};