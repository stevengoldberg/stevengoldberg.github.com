var twitterFetcher=function(){function b(a){return a.replace(/<b[^>]*>(.*?)<\/b>/gi,function(a,b){return b}).replace(/class=".*?"|data-query-source=".*?"|dir=".*?"|rel=".*?"/gi,"")}function a(a,b){for(var c=[],d=RegExp("(^| )"+b+"( |$)"),e=a.getElementsByTagName("*"),k=0,g=e.length;k<g;k++)d.test(e[k].className)&&c.push(e[k]);return c}var c="",d=20,k=!0,l=[],s=!1,r=!0,v=!0,w=null,x=!0,z=!0,y=null,A=!0;return{fetch:function(a,b,n,m,e,q,g,f,t,u){void 0===n&&(n=20);void 0===m&&(k=!0);void 0===e&&(e=
!0);void 0===q&&(q=!0);void 0===g&&(g="default");void 0===f&&(f=!0);void 0===t&&(t=null);void 0===u&&(u=!0);s?l.push({id:a,domId:b,maxTweets:n,enableLinks:m,showUser:e,showTime:q,dateFunction:g,showRt:f,customCallback:t,showInteraction:u}):(s=!0,c=b,d=n,k=m,v=e,r=q,z=f,w=g,y=t,A=u,b=document.createElement("script"),b.type="text/javascript",b.src="//cdn.syndication.twimg.com/widgets/timelines/"+a+"?&lang=en&callback=twitterFetcher.callback&suppress_response_codes=true&rnd="+Math.random(),document.getElementsByTagName("head")[0].appendChild(b))},
callback:function(p){var h=document.createElement("div");h.innerHTML=p.body;"undefined"===typeof h.getElementsByClassName&&(x=!1);p=[];var n=[],m=[],e=[],q=[],g=0;if(x)for(h=h.getElementsByClassName("tweet");g<h.length;){0<h[g].getElementsByClassName("retweet-credit").length?e.push(!0):e.push(!1);if(!e[g]||e[g]&&z)p.push(h[g].getElementsByClassName("e-entry-title")[0]),q.push(h[g].getAttribute("data-tweet-id")),n.push(h[g].getElementsByClassName("p-author")[0]),m.push(h[g].getElementsByClassName("dt-updated")[0]);
g++}else for(h=a(h,"tweet");g<h.length;)p.push(a(h[g],"e-entry-title")[0]),q.push(h[g].getAttribute("data-tweet-id")),n.push(a(h[g],"p-author")[0]),m.push(a(h[g],"dt-updated")[0]),0<a(h[g],"retweet-credit").length?e.push(!0):e.push(!1),g++;p.length>d&&(p.splice(d,p.length-d),n.splice(d,n.length-d),m.splice(d,m.length-d),e.splice(d,e.length-d));h=[];g=p.length;for(e=0;e<g;){if("string"!==typeof w){var f=new Date(m[e].getAttribute("datetime").replace(/-/g,"/").replace("T"," ").split("+")[0]),f=w(f);
m[e].setAttribute("aria-label",f);if(p[e].innerText)if(x)m[e].innerText=f;else{var t=document.createElement("p"),u=document.createTextNode(f);t.appendChild(u);t.setAttribute("aria-label",f);m[e]=t}else m[e].textContent=f}f="";k?(v&&(f+='<div class="user">'+b(n[e].innerHTML)+"</div>"),f+='<p class="tweet">'+b(p[e].innerHTML)+"</p>",r&&(f+='<p class="timePosted">'+m[e].getAttribute("aria-label")+"</p>")):p[e].innerText?(v&&(f+='<p class="user">'+n[e].innerText+"</p>"),f+='<p class="tweet">'+p[e].innerText+
"</p>",r&&(f+='<p class="timePosted">'+m[e].innerText+"</p>")):(v&&(f+='<p class="user">'+n[e].textContent+"</p>"),f+='<p class="tweet">'+p[e].textContent+"</p>",r&&(f+='<p class="timePosted">'+m[e].textContent+"</p>"));A&&(f+='<p class="interact"><a href="https://twitter.com/intent/tweet?in_reply_to='+q[e]+'" class="twitter_reply_icon">Reply</a><a href="https://twitter.com/intent/retweet?tweet_id='+q[e]+'" class="twitter_retweet_icon">Retweet</a><a href="https://twitter.com/intent/favorite?tweet_id='+
q[e]+'" class="twitter_fav_icon">Favorite</a></p>');h.push(f);e++}if(null==y){p=h.length;n=0;m=document.getElementById(c);for(q="<ul>";n<p;)q+="<li>"+h[n]+"</li>",n++;m.innerHTML=q+"</ul>"}else y(h);s=!1;0<l.length&&(twitterFetcher.fetch(l[0].id,l[0].domId,l[0].maxTweets,l[0].enableLinks,l[0].showUser,l[0].showTime,l[0].dateFunction,l[0].showRt,l[0].customCallback,l[0].showInteraction),l.splice(0,1))}}}();SC.initialize({client_id:"67f2822a454cafa2b800fc88cb5c0518",redirect_uri:"http://resistorsings.com"});
$(document).ready(function(){numTweets=20;window.scrollReveal=new scrollReveal;$("#RE").fadeTo(1E3,1,function(){$("#SIS").fadeTo(1E3,1,function(){$("#TOR").fadeTo(1E3,1,function(){})})});twitterFetcher.fetch("438885011689713665","tweet",numTweets,!0,!1,!0,void 0,!0,handleTweets);playSongs();getPhotos();showDates()});
function playSongs(){var b=$("#soundcloud"),a=$("#soundcloud img.knob.nextSong"),c=$("#soundcloud img.knob.prevSong"),d=700>=$(window).width()?".small":".large",k=0,l=0;SC.get("/users/11021442/tracks",function(s){var r=new Rotation(s,1);changeTitle(s[1]);$(".play").on("click",function(a){a.preventDefault();r.play();b.hasClass("paused")?b.removeClass("paused").addClass("playing"):(b.addClass("playing"),ga("send","event","Soundcloud","Play",r.title));$(d+".pause").show();$(d+".play").hide()});$(".pause").on("click",
function(a){a.preventDefault();r.pause();b.addClass("paused").removeClass("playing");$(d+".pause").hide();$(d+".play").show()});$(".nextSong").on("click",function(b){b.preventDefault();r.nextTrack();k+=40;a.css("transform","rotate("+k+"deg)")});$(".prevSong").on("click",function(a){a.preventDefault();r.prevTrack();l-=40;c.css("transform","rotate("+l+"deg)")})})}
function Rotation(b,a){function c(a){SC.stream(a.uri,function(a){k=a});changeTitle(a,!0);l.hasClass("playing")&&this.play();l.removeClass("paused")}var d=a,k="",l=$("#soundcloud"),s=0;_currentTrack=b[d];SC.stream(b[d].uri,function(a){k=a});this.nextTrack=function(){k.stop();d=b[d+1]?d+1:0;c.call(this,b[d])};this.prevTrack=function(){k.stop();d=b[d-1]?d-1:b.length-1;c.call(this,b[d])};this.play=function(){k.play({onfinish:function(){$(".nextSong").click()},whileplaying:function(){s=this.position/this.duration*
100;$("#progress").css("width",s+"%")}})};this.pause=function(){k.togglePause()};this.stop=function(){k.stop()}}function changeTitle(b,a){var c="<a href='"+b.permalink_url+"' onClick=ga('send', 'event', 'Soundcloud', 'Click', "+b.title+");>"+b.title+"</a>";a?$("#title").fadeOut(500,function(){$("#title").html(c).fadeIn(500)}):$("#title").html(c).fadeIn(500)}
function handleTweets(b){var a=0,c=0,d=0;splitTweet(b[a]);$(".prevTweet").click(function(d){d.preventDefault();c-=40;$("img.oscillator.prevTweet").css("transform","rotate("+c+"deg)");a=0===a?numTweets-1:a-1;$("#text").fadeOut(500,function(){splitTweet(b[a]);$("#text").fadeIn(500)})});$(".nextTweet").click(function(c){c.preventDefault();d+=40;$("img.oscillator.nextTweet").css("transform","rotate("+d+"deg)");a=(a+1)%numTweets;$("#text").fadeOut(500,function(){splitTweet(b[a]);$("#text").fadeIn(500)})})}
function splitTweet(b){var a=b.length-1,c=b.search('<p class="interact">'),d=b.slice(0,c);b=b.slice(c,a);$("#text").html(d);$("#buttons").html(b)}function getPhotos(){$.get("https://api.instagram.com/v1/users/252833323/media/recent/?client_id=027d4ba8024541bda9174d50c1592dfa",function(b){addPhotos(b.data);rotatePhotos()},"jsonp")}
function addPhotos(b){var a="",c="";$("#photoContainer").append('<a href="'+b[0].link+"\" onClick=\"ga('send', 'event',  'Instagram', &#39;"+b[0].link+'&#39;);"><img id="slide0" src="'+b[0].images.low_resolution.url+'"></a>');$("#slide0").addClass("active");for(var d=1;d<b.length;d++)a=b[d].images.low_resolution.url,c=b[d].link,$("#photoContainer").append('<a href="'+c+"\" onClick=\"ga('send', 'event', 'Instagram', &#39;"+c+'&#39;);>"><img id="slide'+d+'" src="'+a+'"></a>')}
function rotatePhotos(){$(".nextPhoto").click(function(b){b.preventDefault();var a=$("#photoContainer a img.active"),c=0<a.parent().next().length?a.parent().next().contents():$("#photoContainer a:first img");c.css("z-index",2);a.fadeOut(750,function(){a.css("z-index",1).show().removeClass("active");c.css("z-index",3).addClass("active")})});$(".prevPhoto").click(function(b){b.preventDefault();var a=$("#photoContainer a img.active"),c=0<a.parent().prev().length?a.parent().prev().contents():$("#photoContainer a:last img");
c.css("z-index",2);a.fadeOut(750,function(){a.css("z-index",1).show().removeClass("active");c.css("z-index",3).addClass("active")})})}
function showDates(){var b=0;$.getJSON("shows.json").success(function(a){typewriter("upcoming_shows","Upcoming Shows",150);typewriter("past_shows","Past Shows",150);for(var c=0;c<a.shows.length;c++)isUpcoming(a.shows[c].date)?(b++,a.shows[c].url?$("#upcoming_dates ul").append("<li>"+a.shows[c].date+' - <a href="http://'+a.shows[c].url+"\"onclick=\"ga('send', 'event', 'live', '"+a.shows[c].date+"');\">"+a.shows[c].venue+"</a> - "+a.shows[c].city+"</li>"):$("#upcoming_dates ul").append("<li>"+a.shows[c].date+
" - "+a.shows[c].venue+" - "+a.shows[c].city+"</li>")):$("#past_dates ul").append("<li>"+a.shows[c].date+" - "+a.shows[c].venue+" - "+a.shows[c].city+"</li>");0===b&&$("#upcoming_dates ul").append("<li>Shows TBD ... Check back soon ...</li>")}).fail(function(a,b,d){console.log("Request Failed: "+(b+", "+d))})}function isUpcoming(b){return Date.now()<new Date(b)?!0:!1}
function playerStyle(){$("#soundcloud").watch("opacity",function(){1==this.style("opacity")&&$(this).css({opacity:".85",transition:"opacity .6s","-webkit-transition":"opacity .6s"})})}function typewriter(b,a,c){var d=0,k=setInterval(function(){document.getElementById(b).innerHTML+=a[d];d++;d==a.length&&clearInterval(k)},c)};